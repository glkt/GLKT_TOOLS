# GLKT / Benjamin Vedrenne
# MIT License

# This script create a write node under each selected read nodes. Easy for fast and massive file conversion TO DXV VIDEO.

osdir = nuke.getClipname( "Where to save dxv videos?" )
    
for oReadNode in nuke.selectedNodes():

    oPath =  oReadNode['file'].value()
    first =  oReadNode['first'].value()
    last =  oReadNode['last'].value()
    newPath = oPath.split('/')[-1]
    newPath = newPath.split('.')[0]
    oReadNode['selected'].setValue(True)
    Write = nuke.createNode ("Write")        
    Write.knob('file').setValue(osdir+newPath+".mov") 
    Write.knob('file_type').setValue('mov')
    Write.knob('codec').setValue('DXD3')
    Write.knob('fps').setValue(25)
    Write.knob('quality').setValue('High')
    Write.knob('use_limit').setValue(True)
    Write.knob('first').setValue(first)
    Write.knob('last').setValue(last)
    Write.knob('settings').setValue('000000000000000000000000000001b67365616e000000010000000100000000000001a276696465000000010000000f00000000000000227370746c0000000100000000000000004458443300000000002000000300000000207470726c000000010000000000000000000000000019000000000000000000246472617400000001000000000000000000000000000000530000010000000100000000156d70736f00000001000000000000000000000000186d66726100000001000000000000000000000000000000187073667200000001000000000000000000000000000000156266726100000001000000000000000000000000166d70657300000001000000000000000000000000002868617264000000010000000000000000000000000000000000000000000000000000000000000016656e647300000001000000000000000000000000001663666c67000000010000000000000000004400000018636d667200000001000000000000000052534c4d00000014636c75740000000100000000000000000000001c6364656300000001000000000000000043736552000000000000001c766572730000000100000000000000000003001c00010000')

